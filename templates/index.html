<!DOCTYPE html>
<html>
<head>
    <title>Chatbot</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <!-- <link rel="stylesheet" type="text/css" href="styles.css"> -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500&display=swap');

        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            margin: 0;
            background: #f3f3f3;
            font-family: 'Poppins', sans-serif;
        }

        nav {
            width: 100%;
            background: #007BFF;
            padding: 10px 0;
            color: #fff;
            position: relative;
        }

        nav ul {
            display: flex;
            justify-content: flex-end;
            align-items: flex-start;
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        nav li {
            margin-left: 20px;
            margin-top: 10px;
            margin-right: 20px;
        }

        nav a, nav button {
            color: #fff;
            text-decoration: none;
            margin-left: 20px;
        }

        h1 {
            margin: 20px 0;
        }

        form {
            width: 50%;
            max-width: 600px;
            background: #fff;
            padding: 50px;
            border-radius: 8px;
            box-shadow: 0px 0px 10px 0px rgba(0,0,0,0.1);
            animation: fadeInDown 1s ease-in-out;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        input[type="text"], input[type="date"] {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 4px;
            border: 1px solid #ccc;
        }

        input[type="submit"] {
            background: #007BFF;
            color: #fff;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translate3d(0, -100%, 0);
            }

            to {
                opacity: 1;
                transform: none;
            }
        }

        body.dark-mode {
            background: #333;
            color: #fff;
        }

        body.dark-mode nav {
            background: #222;
        }

        body.dark-mode form {
            background: #444;
            color: #fff;
        }

        body.dark-mode input[type="text"], body.dark-mode input[type="date"] {
            background: #555;
            border: 1px solid #777;
            color: #fff;
        }

        body.dark-mode input[type="submit"] {
            background: #fff;
            color: #000;
        }

        /* To hide the checkbox */
        #checkboxInput {
            display: none;
        }

        .toggleSwitch {
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            width: 50px;
            height: 30px;
            background-color: rgb(82, 82, 82);
            border-radius: 20px;
            cursor: pointer;
            transition-duration: .2s;
        }

        .toggleSwitch::after {
            content: "";
            position: absolute;
            height: 10px;
            width: 10px;
            left: 5px;
            background-color: transparent;
            border-radius: 50%;
            transition-duration: .2s;
            box-shadow: 5px 2px 7px rgba(8, 8, 8, 0.26);
            border: 5px solid white;
        }

        #checkboxInput:checked + .toggleSwitch::after {
            transform: translateX(100%);
            transition-duration: .2s;
            background-color: white;
        }

        /* Switch background change */
        #checkboxInput:checked + .toggleSwitch {
            background-color: rgb(148, 118, 255);
            transition-duration: .2s;
        }

        footer {
            background: #f8f8f8;
            color: #333;
            padding: 10px; /* Reduced padding */
            text-align: center;
            position: fixed;
            left: 0;
            bottom: 0;
            width: 100%;
            font-size: 0.8em; /* Reduced font size */
        }

        body.dark-mode footer {
            background: #333;
            color: #fff;
        }

        footer p {
            margin: 0;
        }

        footer a {
            color: #007BFF;
            text-decoration: none;
        }

        footer a:hover {
            text-decoration: underline;
        }

        body.dark-mode footer a {
            color: #4dc3ff;
        }

        .social-icons a {
            margin-right: 10px;
            color: #333;
            font-size: 20px;
        }

        .social-icons a:hover {
            color: #007BFF;
        }

        .card {
            width: 14em; /* Reduced width */
            height: 18em; /* Reduced height */
            background: #171717;
            transition: 1s ease-in-out;
            clip-path: polygon(25px 0%, 100% 0, 100% calc(100% - 25px), calc(100% - 25px) 100%, 0 100%, 0% 25px);
            border-top-right-radius: 15px; /* Reduced border radius */
            border-bottom-left-radius: 15px; /* Reduced border radius */
            display: flex;
            flex-direction: column;
            margin: 10px; /* Added margin for spacing between cards */
        }

        .card span {
            font-weight: bold;
            color: white;
            text-align: center;
            display: block;
            font-size: 0.9em; /* Reduced font size */
        }

        .card .info {
            font-weight: 400;
            color: white;
            display: block;
            text-align: center;
            font-size: 0.6em; /* Reduced font size */
            margin: 0.5em; /* Reduced margin */
        }

        .card .img {
            width: 3.5em; /* Reduced size */
            height: 3.5em; /* Reduced size */
            background: white;
            border-radius: 10px; /* Reduced border radius */
            margin: auto;
        }

        .card .share {
            margin-top: 0.5em; /* Reduced margin */
            display: flex;
            justify-content: center;
            gap: 0.5em; /* Reduced gap */
        }

        .card a {
            color: white;
            transition: .4s ease-in-out;
        }

        .card a:hover {
            color: red;
        }

        .card button {
            padding: 0.6em 1.3em; /* Reduced padding */
            display: block;
            margin: auto;
            border-radius: 15px; /* Reduced border radius */
            border: none;
            font-weight: bold;
            background: #ffffff;
            color: rgb(0, 0, 0);
            transition: .4s ease-in-out;
        }

        .card button:hover {
            background: red;
            color: white;
            cursor: pointer;
        }

        .chat-container-wrapper {
            border: 1px solid #ccc; /* Add border to the chat container wrapper */
            max-height: 300px; /* Adjust the max-height as needed */
            overflow-y: auto; /* Add a scrollbar for the chat container */
            padding: 10px; /* Add padding to the wrapper */
            margin-bottom: 20px; /* Add some spacing below the chat container */
        }

        /* Style for the chat container */
        .chat-container {
        overflow-y: auto; /* Enable vertical scrolling */
        max-height: 500px; /* Adjust this value according to your needs */
        }
        .button2 {
        display: inline-block;
        transition: all 0.2s ease-in;
        position: relative;
        overflow: hidden;
        z-index: 1;
        color: #090909;
        padding: 0.7em 1.7em;
        font-size: 18px;
        border-radius: 0.5em;
        background: #e8e8e8;
        border: 1px solid #e8e8e8;
        box-shadow: 6px 6px 12px #c5c5c5,
                    -6px -6px 12px #ffffff;
        }

        .button2:active {
        color: #666;
        box-shadow: inset 4px 4px 12px #c5c5c5,
                    inset -4px -4px 12px #ffffff;
        }

        .button2:before {
        content: "";
        position: absolute;
        left: 50%;
        transform: translateX(-50%) scaleY(1) scaleX(1.25);
        top: 100%;
        width: 140%;
        height: 180%;
        background-color: rgba(0, 0, 0, 0.05);
        border-radius: 50%;
        display: block;
        transition: all 0.5s 0.1s cubic-bezier(0.55, 0, 0.1, 1);
        z-index: -1;
        }

        .button2:after {
        content: "";
        position: absolute;
        left: 55%;
        transform: translateX(-50%) scaleY(1) scaleX(1.45);
        top: 180%;
        width: 160%;
        height: 190%;
        background-color: #009087;
        border-radius: 50%;
        display: block;
        transition: all 0.5s 0.1s cubic-bezier(0.55, 0, 0.1, 1);
        z-index: -1;
        }

        .button2:hover {
        color: #ffffff;
        border: 1px solid #009087;
        }

        .button2:hover:before {
        top: -35%;
        background-color: #009087;
        transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
        }

        .button2:hover:after {
        top: -45%;
        background-color: #009087;
        transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
        }

        #loading-text {
        color: #999;
        font-style: italic;
        }
        .clear-button {
            background-color: #000000; /* Green background */
            border: none; /* Remove border */
            color: white; /* White text */
            /* padding: 10px 25px; Padding */
            text-align: center; /* Centered text */
            text-decoration: none; /* Remove underline */
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer; /* Pointer cursor on hover */
            border-radius: 12px; /* Rounded corners */
            transition-duration: 0.4s; /* Transition */
        }

        .clear-button:hover {
            background-color: #db1a1a; /* Darker green on hover */
        }
    </style>
</head>
<body>
    <nav>
        <ul>
            <li><a href="#">Home</a></li>
            <li><button id="clear-chat-button" class="clear-button">Clear Chat</button></li>
            <li>
                <input type="checkbox" id="checkboxInput">
                <label for="checkboxInput" class="toggleSwitch"></label>
            </li>
        </ul>
    </nav>
    <h1 class="text-2xl font-bold mb-4">Chatbot</h1>
    <div class="container">
        <!-- Add a chat container wrapper with borders -->
        <div class="chat-container-wrapper">
            <div class="chat-container" id="chat-container"></div>
        </div>
        <input type="text" id="user-input" placeholder="Type your message..." class="border border-gray-300 rounded px-2 py-1 w-full mb-2" />
        <button id="send-button" class="button2">Send</button>
    </div>
</body>
<script>
    const darkModeButton = document.getElementById('checkboxInput');
    darkModeButton.addEventListener('click', function() {
        document.body.classList.toggle('dark-mode');
    });

    const chatContainer = document.getElementById('chat-container');
    const userInput = document.getElementById('user-input');
    const sendButton = document.getElementById('send-button');
    const clearChatButton = document.getElementById('clear-chat-button');
    clearChatButton.addEventListener('click', function() {
        location.reload();
    });

    sendButton.addEventListener('click', sendMessage);
    userInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            sendMessage();
        }
    });

    function sendMessage() {
        const userMessage = userInput.value;
        addMessage(`[YOU] ${userMessage}`, 'user-message');
        userInput.value = '';

        const loadingText = document.createElement('div');
        loadingText.textContent = 'Loading...';
        loadingText.id = 'loading-text';
        chatContainer.appendChild(loadingText);
        fetch('/chat', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ question: userMessage })
        })
        .then(response => response.json())
        .then(data => {
            const botMessage = data.response;
            const loadingText = document.getElementById('loading-text');
            loadingText.parentNode.removeChild(loadingText);
            addMessage(`[BOT] ${botMessage}`, 'bot-message');
        })
        .catch(error => {
            console.error('Error:', error);
        });
    }

    function addMessage(message, className) {
        const messageElement = createChatMessage(message, className);
        chatContainer.appendChild(messageElement);
    }

    function createChatMessage(message, sender) {
        const messageElement = document.createElement('div');
        messageElement.classList.add('message', sender);
        messageElement.textContent = message;
        return messageElement;
    }
</script>
</html>
